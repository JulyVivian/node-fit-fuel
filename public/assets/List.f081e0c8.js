import{b as j}from"./auth.d2d8facc.js";import{g as V,u as L,d as N}from"./consumptions.3224ca71.js";import{a as s,A as T,_ as z,d as M,u as G,r as H,i as k,j as U,g as m,o as d,c as _,w as f,e as B,k as q,l as v,F as x,f as g,C as R,t as J,E as Q,h as W,n as O,p as X,b as Y,q as Z}from"./index.cb732601.js";import"./axios.74fc0aed.js";import"./localStorage.68b6825f.js";var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},ee=K;function I(a){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?Object(arguments[n]):{},o=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),o.forEach(function(c){te(a,c,l[c])})}return a}function te(a,n,l){return n in a?Object.defineProperty(a,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[n]=l,a}var b=function(n,l){var o=I({},n,l.attrs);return s(T,I({},o,{icon:ee}),null)};b.displayName="PlusCircleOutlined";b.inheritAttrs=!1;var ae=b;const ne=[{title:"\u9879\u76EE\u7C7B\u578B",dataIndex:"ff_type"},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"name"},{title:"\u65F6\u95F4",dataIndex:"time"},{title:"\u5185\u5BB9",dataIndex:"content"},{title:"\u70ED\u91CF\u7C7B\u578B",dataIndex:"fuel_variety"},{title:"\u70ED\u91CF\u6570\u636E",dataIndex:"calories"},{title:"\u64CD\u4F5C",dataIndex:"operation"}];const oe=a=>(X("data-v-b317b1a0"),a=a(),Y(),a),le=oe(()=>B("h2",null,"\u6211\u7684\u8FD0\u52A8\u5065\u5EB7\u8BB0\u5F55",-1)),ce={style:{"text-align":"left"}},se={key:0,class:"editable-cell"},re={key:0,class:"editable-cell-input-wrapper"},ie={key:1,class:"editable-cell-text-wrapper"},ue=M({__name:"List",setup(a){const n=G(),l=ne,o=H({});let c=k();U(()=>{P()});const P=async()=>{try{let{data:t}=await V();c.value=t,console.log("consum:::",c)}catch{}},i=k(c),w=t=>{o[t]=Z(i.value.filter(e=>t===e.id)[0])},y=async t=>{try{const{id:e}=t;let u=await L(e,{content:o[e].content});Object.assign(i.value.filter(h=>e===h.id)[0],o[e]),delete o[e]}catch(e){console.log("update err::",e)}},S=async t=>{try{let{code:e}=await N(t);e==="0000"&&(i.value=i.value.filter(u=>u.id!==t))}catch(e){console.log("delete err::",e)}},D=async()=>{try{let{code:t,msg:e}=await j();t==="0000"?n.push("/login"):console.log(e)}catch(t){console.log("logout err::",t)}},A=()=>{n.push("/create")};return(t,e)=>{const u=m("a-button"),h=m("a-input"),E=m("a-popconfirm"),F=m("a-table");return d(),_(x,null,[s(u,{class:"logout-btn",type:"link",onClick:D},{default:f(()=>[g("\u9000\u51FA\u767B\u5F55")]),_:1}),le,B("p",ce,[s(u,{onClick:A,type:"link",icon:q(v(ae))},{default:f(()=>[g("\u6DFB\u52A0\u65B0\u7684\u6D3B\u52A8")]),_:1},8,["icon"])]),s(F,{bordered:"","data-source":i.value,columns:v(l)},{bodyCell:f(({column:C,text:$,record:r})=>[C.dataIndex==="content"?(d(),_("div",se,[o[r.id]?(d(),_("div",re,[s(h,{value:o[r.id].content,"onUpdate:value":p=>o[r.id].content=p,onPressEnter:p=>y(r)},null,8,["value","onUpdate:value","onPressEnter"]),s(v(R),{class:"editable-cell-icon-check",onClick:p=>y(r)},null,8,["onClick"])])):(d(),_("div",ie,[g(J($||" ")+" ",1),s(v(Q),{class:"editable-cell-icon",onClick:p=>w(r.id)},null,8,["onClick"])]))])):C.dataIndex==="operation"?(d(),_(x,{key:1},[i.value.length?(d(),W(E,{key:0,title:"Sure to delete?",onConfirm:p=>S(r.id)},{default:f(()=>[s(u,{danger:"",type:"link"},{default:f(()=>[g("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])):O("",!0)],64)):O("",!0)]),_:1},8,["data-source","columns"])],64)}}});var ve=z(ue,[["__scopeId","data-v-b317b1a0"]]);export{ve as default};
